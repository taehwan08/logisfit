{% load static %}
<!-- 사이드바 -->
<nav id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <a href="{% url 'dashboard' %}" class="sidebar-brand">
            <img src="{% static 'images/logo.png'%}">
        </a>
        <button class="sidebar-toggle d-lg-none" type="button">
            <i class="bi bi-x-lg"></i>
        </button>
    </div>

    <div class="sidebar-body">
        <ul class="sidebar-nav">
            <!-- 대시보드 -->
            <li class="sidebar-item">
                <a href="{% url 'dashboard' %}" class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <i class="bi bi-speedometer2"></i>
                    <span>대시보드</span>
                </a>
            </li>

            {% if user.is_admin or user.is_superuser %}
                <!-- 관리자 메뉴 -->
                <li class="sidebar-header-text">관리자</li>

                <li class="sidebar-item">
                    <a href="{% url 'accounts:user_list' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'accounts' %}active{% endif %}">
                        <i class="bi bi-people"></i>
                        <span>사용자 관리</span>
                        {% if pending_users_count %}
                            <span class="badge bg-danger ms-auto">{{ pending_users_count }}</span>
                        {% endif %}
                    </a>
                </li>

                <li class="sidebar-item">
                    <a href="{% url 'clients:client_list' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'clients' %}active{% endif %}">
                        <i class="bi bi-building"></i>
                        <span>거래처 관리</span>
                    </a>
                </li>
            {% endif %}

            {% if user.is_admin or user.is_superuser or user.is_worker %}
                <!-- 검수 관리 메뉴 -->
                <li class="sidebar-header-text">검수 관리</li>

                <li class="sidebar-item">
                    <a href="{% url 'inspection:office_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.url_name == 'office_page' %}active{% endif %}">
                        <i class="bi bi-file-earmark-spreadsheet"></i>
                        <span>송장 업로드</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'inspection:field_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.url_name == 'field_page' %}active{% endif %}">
                        <i class="bi bi-upc-scan"></i>
                        <span>바코드 검수</span>
                    </a>
                </li>

                <!-- 작업 관리 메뉴 -->
                <li class="sidebar-header-text">작업 관리</li>

                <!-- Phase 3 이후 활성화 -->
                <!--
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-clipboard-check"></i>
                        <span>작업 입력</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-list-check"></i>
                        <span>작업 내역</span>
                    </a>
                </li>
                -->
            {% endif %}

            {% if user.is_admin or user.is_superuser or user.is_worker or user.is_client %}
                <!-- 출고 관리 메뉴 -->
                <li class="sidebar-header-text">출고 관리</li>

                <li class="sidebar-item">
                    <a href="{% url 'fulfillment:order_list' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.url_name == 'order_list' %}active{% endif %}">
                        <i class="bi bi-truck"></i>
                        <span>출고 현황</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'fulfillment:order_create' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.url_name == 'order_create' %}active{% endif %}">
                        <i class="bi bi-plus-square"></i>
                        <span>주문 등록</span>
                    </a>
                </li>
            {% endif %}

            {% if user.is_admin or user.is_superuser or user.is_worker %}
                <!-- 재고 관리 메뉴 -->
                <li class="sidebar-header-text">재고 관리</li>

                <li class="sidebar-item">
                    <a href="{% url 'inventory:session_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'session_page' %}active{% endif %}">
                        <i class="bi bi-clipboard-data"></i>
                        <span>재고조사</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'inventory:scan_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'scan_page' %}active{% endif %}">
                        <i class="bi bi-upc-scan"></i>
                        <span>재고 스캔</span>
                    </a>
                </li>
                {% if user.is_admin or user.is_superuser %}
                <li class="sidebar-item">
                    <a href="{% url 'inventory:scan_upload_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'scan_upload_page' %}active{% endif %}">
                        <i class="bi bi-file-earmark-arrow-up"></i>
                        <span>스캔 업로드</span>
                    </a>
                </li>
                {% endif %}
                <li class="sidebar-item">
                    <a href="{% url 'inventory:status_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'status_page' %}active{% endif %}">
                        <i class="bi bi-bar-chart-line"></i>
                        <span>재고 현황</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'inventory:products_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'products_page' %}active{% endif %}">
                        <i class="bi bi-box-seam"></i>
                        <span>상품 관리</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'inventory:inbound_page' %}" class="sidebar-link {% if request.resolver_match and request.resolver_match.app_name == 'inventory' and request.resolver_match.url_name == 'inbound_page' %}active{% endif %}">
                        <i class="bi bi-box-arrow-in-down"></i>
                        <span>입고관리</span>
                    </a>
                </li>
            {% endif %}

            {% if user.is_admin or user.is_superuser %}
                <!-- 보관 관리 메뉴 -->
                <li class="sidebar-header-text">보관 관리</li>

                <!-- Phase 4 이후 활성화 -->
                <!--
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-boxes"></i>
                        <span>파레트 관리</span>
                    </a>
                </li>
                -->
            {% endif %}

            {% if user.is_admin or user.is_superuser %}
                <!-- 청구 관리 메뉴 -->
                <li class="sidebar-header-text">청구 관리</li>

                <!-- Phase 5 이후 활성화 -->
                <!--
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-receipt"></i>
                        <span>청구서 관리</span>
                    </a>
                </li>
                -->
            {% endif %}

            {% if user.is_client %}
                <!-- 거래처 메뉴 -->
                <li class="sidebar-header-text">내 거래처</li>

                <!-- Phase 3 이후 활성화 -->
                <!--
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-list-check"></i>
                        <span>작업 내역</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <i class="bi bi-receipt"></i>
                        <span>청구서 조회</span>
                    </a>
                </li>
                -->
            {% endif %}
        </ul>
    </div>

</nav>
